{% extends 'base.html' %}
{% load static %}
{% block title %}Painel do Tutor{% endblock %}

{% block content %}

<link rel="stylesheet" href="{% static 'css/painel.css' %}">

<div class="dashboard-container">

    <h2 class="dashboard-title">
        Bem-vindo, {{ tutor_perfil.usuario.first_name }} üêæ
    </h2>

    <div class="dashboard-actions">
        <a href="{% url 'tutores:perfil_tutor' %}" class="btn-primary">
            Meu Perfil
        </a>

        <a href="{% url 'tutores:cadastro_animal' %}" class="btn-success">
            + Cadastrar Animal
        </a>
    </div>

    <h3 class="section-subtitle">Pets cadastrados</h3>

    <div class="pets-list">

        {% for animal in animais %}
        <div class="pet-card">

            <div class="pet-actions">
                <a href="{% url 'tutores:editar_animal' animal.id %}" class="icon-btn edit" title="Editar">
                    <i class="fas fa-pencil-alt"></i>
                </a>

                <a href="{% url 'tutores:deletar_animal' animal.id %}"
                   class="icon-btn delete"
                   title="Deletar"
                   onclick="return confirm('Tem certeza que deseja deletar este animal?');">
                    <i class="fas fa-trash-alt"></i>
                </a>
            </div>

            <div class="pet-header">
                {% if animal.foto %}
                    <img src="{{ animal.foto.url }}" class="pet-photo" alt="{{ animal.nome }}">
                {% else %}
                    <img src="{% static 'images/default-pet.jpg' %}" class="pet-photo" alt="{{ animal.nome }}">
                {% endif %}
            </div>

            <div class="pet-info">
                <h4>{{ animal.nome }}</h4>
                <p>{{ animal.especie|capfirst }} ‚Äî {{ animal.idade }} anos</p>

                {% if animal.raca %}
                <p><strong>Ra√ßa:</strong> {{ animal.raca|capfirst }}</p>
                {% endif %}

                {% if animal.altura %}
                <p><strong>Altura:</strong> {{ animal.altura }} cm</p>
                {% endif %}

                {% if animal.peso %}
                <p><strong>Peso:</strong> {{ animal.peso }} kg</p>
                {% endif %}

                {% if animal.observacoes %}
                <p><strong>Observa√ß√µes:</strong> {{ animal.observacoes }}</p>
                {% endif %}
            </div>

        </div>
        {% empty %}
        <p class="no-pets">Nenhum animal cadastrado ainda.</p>
        {% endfor %}
    </div>

</div>

<style>
.dashboard-container {
    max-width: 900px;
    margin: auto;
    padding: 20px;
}

.dashboard-title {
    font-size: 28px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 25px;
    color: var(--azul-escuro);
}

.dashboard-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-bottom: 25px;
    flex-wrap: wrap;
}

.btn-primary, .btn-success {
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: 600;
    text-decoration: none;
    color: #fff;
}

.btn-primary {
    background-color: var(--azul);
}

.btn-primary:hover {
    background-color: var(--azul-escuro);
}

.btn-success {
    background-color: #28a745;
}

.btn-success:hover {
    background-color: #1f7a34;
}

.section-subtitle {
    font-size: 22px;
    margin-bottom: 15px;
}

.pets-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 20px;
}

.pet-card {
    background: #fff;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
}

.pet-actions {
    position: absolute;
    right: 10px;
    top: 10px;
    display: flex;
    gap: 10px;
}

.icon-btn {
    color: #555;
    font-size: 16px;
}

.icon-btn.edit:hover {
    color: #2a7bd6;
}

.icon-btn.delete:hover {
    color: #c50000;
}

.pet-photo {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 10px;
}

.pet-info {
    margin-top: 12px;
}

.pet-info h4 {
    margin-bottom: 5px;
    font-size: 20px;
}

.no-pets {
    text-align: center;
    margin-top: 20px;
    font-style: italic;
}
</style>

{% endblock %}
