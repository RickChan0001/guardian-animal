{% extends "base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

<div class="form-container" style="max-width: 800px; margin: 30px auto; padding: 25px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2 style="color: var(--azul);">
            <i class="fas fa-bell"></i> Notificações
        </h2>
        {% if nao_lidas > 0 %}
            <span style="background: #dc3545; color: white; padding: 5px 12px; border-radius: 20px; font-size: 14px;">
                {{ nao_lidas }} não lida{{ nao_lidas|pluralize }}
            </span>
        {% endif %}
    </div>

    {% if notificacoes %}
        <div style="display: flex; flex-direction: column; gap: 15px;">
            {% for notificacao in notificacoes %}
            <div class="notificacao-item" style="background: {% if not notificacao.is_read %}#e7f3ff{% else %}white{% endif %}; padding: 20px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid {% if not notificacao.is_read %}var(--azul){% else %}#ddd{% endif %};">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex: 1;">
                        <p style="margin: 0; color: #333; line-height: 1.6;">{{ notificacao.message }}</p>
                        <p style="margin: 10px 0 0 0; color: #999; font-size: 14px;">
                            <i class="fas fa-clock"></i> {{ notificacao.created_at|date:"d/m/Y H:i" }}
                        </p>
                    </div>
                    {% if not notificacao.is_read %}
                    <a href="{% url 'tutores:marcar_notificacao_lida' notificacao.id %}" 
                       style="margin-left: 15px; color: var(--azul); text-decoration: none;"
                       title="Marcar como lida">
                        <i class="fas fa-check-circle"></i>
                    </a>
                    {% else %}
                    <span style="margin-left: 15px; color: #28a745;">
                        <i class="fas fa-check-circle"></i>
                    </span>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 12px;">
            <i class="fas fa-bell-slash" style="font-size: 48px; color: #ccc; margin-bottom: 15px;"></i>
            <p style="font-size: 18px; color: #666;">Você não possui notificações</p>
        </div>
    {% endif %}
</div>

<style>
.notificacao-item:hover {
    transform: translateX(5px);
    transition: transform 0.2s;
}
</style>

{% endblock content %}

